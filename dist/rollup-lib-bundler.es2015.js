/*! @comandeer/rollup-lib-bundler v0.11.0 | (c) 2020 Comandeer | MIT license (see LICENSE) */
import{existsSync as e,readFileSync as r}from"fs";import{rollup as t}from"rollup";import n from"@rollup/plugin-commonjs";import{terser as o}from"rollup-plugin-terser";import i from"@rollup/plugin-json";import s from"@rollup/plugin-babel";import a from"@babel/preset-env";function u(t){if("string"==typeof t)t=function(t){if(!e(t))throw new ReferenceError("File with given path does not exist.");const n=r(t,"utf8");let o;try{o=JSON.parse(n)}catch(e){throw new SyntaxError("Given file is not parsable as a correct JSON.")}return o}(t);else if("object"!=typeof t)throw new TypeError("Provide string or object.");return function(e){function r(r){if(void 0===e[r])throw new ReferenceError(`Package metadata must contain "${r}" property.`)}r("name"),r("version"),r("main"),function(r,t){if(void 0===e[r]&&void 0===e[t])throw new ReferenceError(`Package metadata must contain either "${r}" or "${t}" or both properties.`)}("module","jsnext:main"),r("author"),r("license")}(t),{name:(n=t).name,version:n.version,author:c(n.author),license:n.license,src:"src/index.js",dist:{esm:n.module||n["jsnext:main"],cjs:n.main}};var n}function c(e){return"object"!=typeof e?String(e):e.name}function l(e,r){const t=function(e){return`/*! ${e.name} v${e.version} | (c) ${(new Date).getFullYear()} ${e.author} | ${e.license} license (see LICENSE) */`}(e),u=[n(),i(),s({babelrc:!1,babelHelpers:"bundled",presets:[[a,{targets:{node:"10.0.0"}}]]}),o()];return{input:e.src,plugins:u,output:{banner:t,sourcemap:!0,format:r?"cjs":"es",file:r?e.dist.cjs:e.dist.esm}}}export default function(){return async function(e){const r=l(e,!0),n=l(e,!1),o=await Promise.all([t(r),t(n)]);return Promise.all([o[0].write(r.output),o[1].write(n.output)])}(u("package.json"))}
//# sourceMappingURL=rollup-lib-bundler.es2015.js.map
