{"version":3,"file":"rollup-lib-bundler.mjs","sources":["../../src/bundler/resolveDTSImportPaths.ts","../../src/bundler/rollupPlugins/resolveLinkedBundles.ts","../../src/bundler/bundleTypes.ts","../../src/targets.ts","../../src/utils/getDirName.ts","../../src/bundler.ts","../../src/generateBanner.ts","../../src/bundler/rollupPlugins/preserveDynamicImports.ts","../../src/bundler/fixBinPermissions.ts","../../src/OutputController.ts","../../src/packageParser.ts","../../src/index.ts","../../src/utils/getDistDirPaths.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null],"names":["virtualPrefix","virtualPrefixRegex","RegExp","resolveLinkedBundles","projectPath","metadata","isTypeBundling","name","async","importee","importer","startsWith","resolved","originalExtension","extname","importerDir","dirname","importerWithoutVirtualPrefix","importeeFullPath","join","importeeWithDTSExtension","tsSourceFilePath","importeeWithTSExtension","id","resolveDTSImportPaths","this","resolve","skipSelf","relative","srcPath","entryPoint","isEntryPoint","undefined","types","srcPathRelativeToProject","external","code","chunk","file","chunkFullPath","magicString","MagicString","importerFullPath","slice","distPathRelativeToProject","esm","distFullPath","chunkDirectoryPath","distPathRelativeToChunk","importOrExportString","replace","bundlePath","toString","map","generateMap","bundleTypes","packageInfo","project","userCompilerOptions","tsConfig","tsConfigFilePath","tsConfigContent","ts","readConfigFile","sys","readFile","parseJsonConfigFileContent","config","getUserCompilerOptions","compilerOptions","declaration","emitDeclarationOnly","tsFiles","globby","absolute","cwd","host","createCompilerHost","relativeFilePath","getRelativeToProjectPath","filePath","emittedFiles","input","sourceFile","originalFilePath","tsExtensionRegex","getOriginalDTsFilePath","rollupConfig","plugins","onwarn","outputConfig","format","bundle","rollup","write","__dirname","url","packageJSONFilePath","packageJSONFileContent","engines","JSON","parse","node","bundler","onWarn","source","output","banner","convertCJS","json","renderDynamicImport","left","right","babel","babelrc","babelHelpers","presets","targets","extensions","type","tsconfig","outputPath","sourcemap","exports","inputConfig","binFilePath","chmod","fixBinPermissions","bundleChunk","boldYellow","consoleControlStrings","color","boldRed$1","colorReset$1","OutputController","console","spinner","pendingLogs","pendingWarnings","warning","static","stack","stackParts","split","newStack","constructor","stderr","label","stdout","value","TypeError","isValidSpinner","show","hide","push","args","log","warningMessage","createWarning","display","forEach","errorLog","createError","error","packageParser","packageDir","dirPath","path","ReferenceError","parsed","SyntaxError","loadAndParsePackageJSONFile","obj","version","_obj$exports","import","_obj$exports2","author","license","normalize","dist","prepareMetadata","prepareAuthorMetadata","prepareDistMetadata","subpaths","subPaths","Object","keys","filter","subpath","includes","binSubPaths","bin","getBinSubPaths","getSubPaths","subPathsMetadata","Promise","all","subPath","subPathGlobPattern","subPathFileName","matchedFiles","fileExtensions","getEntryPoint","subPathFilePath","isBin","isBinSubPath","esmTarget","getBinTarget","exportsTarget","getESMTarget","exportType","isTS","getEntryPointType","exportMetadata","typesTarget","getTypesTarget","tsConfigPath","tsConfigGlobPattern","length","find","endsWith","getTSConfigPath","prepareSubPathMetadata","reduce","currentTargets","getExportsTarget","boldGreen","boldRed","colorReset","rlb","outputController","showSpinner","packageDirectory","process","distDirPaths","Set","values","esmFilePath","esmDistDirPath","typesFilePath","typesDistDirPath","distDir","hideSpinner"],"mappings":"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"}