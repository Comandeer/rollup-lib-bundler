{"version":3,"file":"rollup-lib-bundler.mjs","sources":["../../src/bundler/resolveDTSImportPaths.ts","../../src/bundler/rollupPlugins/resolveLinkedBundles.ts","../../src/bundler/bundleTypes.ts","../../src/targets.ts","../../src/utils/getDirName.ts","../../src/bundler.ts","../../src/generateBanner.ts","../../src/bundler/rollupPlugins/preserveDynamicImports.ts","../../src/bundler/fixBinPermissions.ts","../../src/OutputController.ts","../../src/packageParser.ts","../../src/index.ts","../../src/utils/getDistDirPaths.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null],"names":["virtualPrefix","virtualPrefixRegex","RegExp","resolveLinkedBundles","projectPath","metadata","isTypeBundling","name","resolveId","importee","importer","startsWith","resolved","originalExtension","extname","importerDir","dirname","importerWithoutVirtualPrefix","importeeFullPath","join","importeeWithDTSExtension","tsSourceFilePath","importeeWithTSExtension","id","resolveDTSImportPaths","this","resolve","skipSelf","relative","srcPath","entryPoint","isEntryPoint","undefined","types","srcPathRelativeToProject","external","renderChunk","code","chunk","file","chunkFullPath","magicString","MagicString","importerFullPath","slice","distPathRelativeToProject","esm","distFullPath","chunkDirectoryPath","distPathRelativeToChunk","importOrExportString","replace","bundlePath","toString","map","generateMap","async","bundleTypes","packageInfo","project","userCompilerOptions","tsConfig","tsConfigFilePath","tsConfigContent","ts","readConfigFile","sys","readFile","parseJsonConfigFileContent","config","getUserCompilerOptions","compilerOptions","declaration","emitDeclarationOnly","tsFiles","globby","absolute","cwd","host","createCompilerHost","relativeFilePath","getRelativeToProjectPath","filePath","emittedFiles","input","sourceFile","originalFilePath","tsExtensionRegex","getOriginalDTsFilePath","rollupConfig","plugins","onwarn","outputConfig","format","bundle","rollup","write","__dirname","url","packageJSONFilePath","packageJSONFileContent","engines","JSON","parse","node","bundler","onWarn","source","output","banner","convertCJS","json","renderDynamicImport","left","right","babel","babelrc","babelHelpers","presets","targets","extensions","type","tsconfig","outputPath","sourcemap","exports","inputConfig","binFilePath","chmod","fixBinPermissions","bundleChunk","OutputController","console","spinner","pendingLogs","pendingWarnings","constructor","stderr","label","stdout","value","TypeError","isValidSpinner","createError","stack","stackParts","split","newStack","chalk","red","bold","show","hide","push","args","log","warningMessage","warning","createWarning","display","forEach","errorLog","error","packageParser","packageDir","dirPath","path","ReferenceError","parsed","SyntaxError","loadAndParsePackageJSONFile","obj","version","_obj$exports","import","_obj$exports2","author","license","normalize","dist","prepareMetadata","prepareAuthorMetadata","prepareDistMetadata","subpaths","subPaths","Object","keys","filter","subpath","includes","binSubPaths","bin","getBinSubPaths","getSubPaths","subPathsMetadata","Promise","all","subPath","subPathGlobPattern","subPathFileName","matchedFiles","fileExtensions","getEntryPoint","subPathFilePath","isBin","isBinSubPath","esmTarget","getBinTarget","exportsTarget","getESMTarget","exportType","isTS","getEntryPointType","exportMetadata","typesTarget","getTypesTarget","tsConfigPath","tsConfigGlobPattern","length","find","endsWith","getTSConfigPath","prepareSubPathMetadata","reduce","currentTargets","getExportsTarget","rlb","outputController","showSpinner","packageDirectory","process","distDirPaths","Set","values","esmFilePath","esmDistDirPath","typesFilePath","typesDistDirPath","distDir","hideSpinner"],"mappings":"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"}