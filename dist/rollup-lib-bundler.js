/*! @comandeer/rollup-lib-bundler v0.13.0 | (c) 2021 Comandeer | MIT license (see LICENSE) */
"use strict";var e=require("fs"),r=require("rollup"),t=require("@rollup/plugin-commonjs"),n=require("rollup-plugin-terser"),o=require("@rollup/plugin-json"),i=require("@rollup/plugin-babel"),u=require("@babel/preset-env");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=s(t),c=s(o),l=s(i),p=s(u);function f(r){if("string"==typeof r)r=function(r){if(!e.existsSync(r))throw new ReferenceError("File with given path does not exist.");const t=e.readFileSync(r,"utf8");let n;try{n=JSON.parse(t)}catch(e){throw new SyntaxError("Given file is not parsable as a correct JSON.")}return n}(r);else if("object"!=typeof r)throw new TypeError("Provide string or object.");return function(e){function r(r){if(void 0===e[r])throw new ReferenceError(`Package metadata must contain "${r}" property.`)}function t(...r){if(!r.some((r=>{const t=r.split(".");return n(e,t)})))throw new ReferenceError(`Package metadata must contain one of ${o(r)} properties or all of them.`)}function n(e,r){const t=r.shift();return void 0!==e[t]&&(0===r.length||n(e[t],r))}function o(e){return e.map(((r,t)=>{const n=`"${r}"`;if(0===t)return n;return`${t===e.length-1?" or ":", "}${n}`})).join("")}r("name"),r("version"),t("exports.require","main"),t("exports.import","module","jsnext:main"),r("author"),r("license")}(r),{name:(t=r).name,version:t.version,author:m(t.author),license:t.license,src:"src/index.js",dist:{esm:d(t),cjs:g(t)}};var t}function m(e){return"object"!=typeof e?String(e):e.name}function d(e){return e.exports&&e.exports.import?e.exports.import:e.module||e["jsnext:main"]}function g(e){return e.exports&&e.exports.require?e.exports.require:e.main}const h=">=12.0.0".replace(/[<=>~^]/g,"");function x(e,r){const t=function(e){return`/*! ${e.name} v${e.version} | (c) ${(new Date).getFullYear()} ${e.author} | ${e.license} license (see LICENSE) */`}(e),o=[a.default(),c.default(),l.default({babelrc:!1,babelHelpers:"bundled",presets:[[p.default,{targets:{node:h}}]]}),n.terser()];return{input:e.src,plugins:o,output:{banner:t,sourcemap:!0,format:r?"cjs":"es",file:r?e.dist.cjs:e.dist.esm,exports:"auto"}}}module.exports=function(){return async function(e){const t=x(e,!0),n=x(e,!1),o=await Promise.all([r.rollup(t),r.rollup(n)]);return Promise.all([o[0].write(t.output),o[1].write(n.output)])}(f("package.json"))};
//# sourceMappingURL=rollup-lib-bundler.js.map
