/*! @comandeer/rollup-lib-bundler v0.1.1 | (c) 2017 undefined | MIT license (see LICENSE) */
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function loadAndParseFile(e){if(!fs.existsSync(e))throw new ReferenceError("File with given path does not exist.");var r=fs.readFileSync(e),t=void 0;try{t=JSON.parse(r)}catch(e){throw new SyntaxError("Given file is not parsable as a correct JSON.")}return t}function lintObject(e){function r(r){if(void 0===e[r])throw new ReferenceError('Package metadata must contain "'+r+'" property.')}r("name"),r("version"),r("main"),function(r,t){if(void 0===e[r]&&void 0===e[t])throw new ReferenceError('Package metadata must contain either "'+r+'" or "'+t+'" or both properties.')}("module","jsnext:main"),r("author"),r("license")}function prepareAuthorMetadata(e){return"object"!==(void 0===e?"undefined":_typeof(e))?String(e):e.name}function prepareMetadata(e){return{name:e.name,version:e.version,author:prepareAuthorMetadata(e.author),license:e.license,src:"src/index.js",dist:{es2015:e.module||e["jsnext:main"],es5:e.main}}}function packageParser(e){if("string"==typeof e)e=loadAndParseFile(e);else if("object"!==(void 0===e?"undefined":_typeof(e)))throw new TypeError("Provide string or object.");return lintObject(e),prepareMetadata(e)}function getRollupConfig(e,r){var t="/*! "+e.name+" v"+e.version+" | (c) "+(new Date).getFullYear()+" "+e.author+" | "+e.license+" license (see LICENSE) */",n=[convertCJS(),babili({comments:!1,banner:t})];return r&&(n[1]=babel({presets:[[preset]]}),n.push(uglify({output:{preamble:t}}))),{entry:e.src,format:r?"cjs":"es",sourceMap:!0,plugins:n,banner:t,dest:r?e.dist.es5:e.dist.es2015}}function bundler(e){var r=getRollupConfig(e,!0),t=getRollupConfig(e,!1);return Promise.all([rollup.rollup(r),rollup.rollup(t)]).then(function(e){return Promise.all([e[0].write(r),e[1].write(t)])})}function rlb(){return bundler(packageParser("package.json"))}Object.defineProperty(exports,"__esModule",{value:!0});var fs=require("fs"),rollup=require("rollup"),convertCJS=_interopDefault(require("rollup-plugin-commonjs")),babili=_interopDefault(require("rollup-plugin-babili")),babel=_interopDefault(require("rollup-plugin-babel")),preset=_interopDefault(require("babel-preset-es2015-rollup")),uglify=_interopDefault(require("rollup-plugin-uglify")),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.default=rlb,exports.bundler=bundler,exports.packageParser=packageParser;
//# sourceMappingURL=rollup-lib-bundler.js.map
